<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Insta Downloader</title>
  <style>
    body{font-family:sans-serif;background:#f3f4f6;margin:0;padding:0}
    .container{max-width:600px;margin:5rem auto;padding:2rem;background:#fff;border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,0.1);text-align:center}
    input{width:90%;padding:0.75rem;margin:1rem auto;border:1px solid #ccc;border-radius:8px;font-size:1rem;display:block}
    button{background:#047857;color:#fff;border:none;padding:0.75rem 1.5rem;border-radius:8px;font-size:1rem;cursor:pointer}
    .download-btn{background:#1e3a8a;color:#fff;padding:0.75rem 1.5rem;margin-top:1rem;border-radius:8px;text-decoration:none;font-weight:bold;display:inline-block}
    .result{margin-top:2rem}
    video,img{max-width:100%}
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸ“¥ Insta Downloader</h1>
    <input id="urlInput" placeholder="Paste Instagram Reel/Post/Story URL" />
    <button onclick="downloadMedia()">Download</button>
    <div id="result" class="result" style="display:none">
      <h3>Preview</h3>
      <video id="video" controls style="display:none"></video>
      <img id="image" style="display:none"/>
      <br/>
      <a id="downloadBtn" target="_blank" download><button class="download-btn">Download Now</button></a>
    </div>
  </div>
  <script>
    async function downloadMedia(){
      const url = document.getElementById('urlInput').value.trim();
      if(!url){alert('Paste a URL!');return;}
      try{
        const resp = await fetch(`https://instagram-media-downloader.p.rapidapi.com/rapid/post.php?url=${encodeURIComponent(url)}`, {
          method:'GET',
          headers:{
            'X-RapidAPI-Key':'29d2a50795msh6d587b324fd4728p1a94c3jsnf249e3a65552',
            'X-RapidAPI-Host':'instagram-media-downloader.p.rapidapi.com'
          }
        });
        const data = await resp.json();
        if(!data?.media?.length){alert('No media found.');return;}
        const media = data.media[0];
        document.getElementById('video').src = media.includes('.mp4')? media : '';
        document.getElementById('image').src = !media.includes('.mp4')? media : '';
        document.getElementById('video').style.display = media.includes('.mp4')? 'block':'none';
        document.getElementById('image').style.display = !media.includes('.mp4')? 'block':'none';
        document.getElementById('downloadBtn').href = media;
        document.getElementById('result').style.display='block';
      } catch(err){
        console.error(err);
        alert('Error fetching media. Check console.');
      }
    }
  </script>
</body>
</html>
